#
# include this in the server section that you want to use with webb.
#

# compress all text data
gzip on;
gzip_min_length 1000;
gzip_types text/plain;
gzip_types application/json;
gzip_types application/javascript;
gzip_types text/css;

# serve static files first and fallback to Lua scripts
location / {
	root www;
	try_files $uri @lua;
}

# hide source code
location ~ \.(lua|lp|cat|mu)$ {
	default_type text/html;
	content_by_lua_file 'ngx.lua';
}

# serve all dynamic content through a single Lua entry-point
location @lua {
	default_type text/html;
	content_by_lua_file 'ngx.lua';
}

# prevent opening our URLs in frames.
add_header X-Frame-Options DENY;

# prevent browsers from opening resources with wrong mime types.
add_header X-Content-Type-Options nosniff;

