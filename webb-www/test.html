<!DOCTYPE html>
<html>
<body>
<script src="glue.js"></script>
<script src="divs.js"></script>
<style>
#m {
	border: 5px solid black;
	height: 500px;
	overflow: auto;
	position: relative;
}
#h {
	height: 10000000px;
	position: absolute;
	box-sizing: border-box;
}
#c {
	position: relative;
	top: 0;
}
</style>
<div id=m><div id=h><div id=c></div></div></div>
<script>

for (let i = 0; i < (500 / 20) + 1; i++) {
	c.add(H.div({style: 'height: 20px'}, 'element '+i))
}

function repopulate(sy) {
	sy = clamp(sy, 0, 10000000 - 500)
	let i0 = floor(sy / 20)
	c.style.top = (sy - sy % 20) + 'px'
	for (let i = 0; i < (500 / 20) + 1; i++) {
		c.at[i].innerHTML = 'elementxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' + (i0 + i)
	}
}

m.on('scroll', function(e) {
	repopulate(e.target.scrollTop)
})

</script>
</body>
</html>
